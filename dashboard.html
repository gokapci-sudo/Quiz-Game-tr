async function updateUI() {
    const { data: user } = await supabaseClient.from('profiles').select('*').eq('telegram_id', tgUser.id).single();
    const { data: sett } = await supabaseClient.from('settings').select('*').eq('id', 1).single();
    const status = getRaceStatus();

    // 1. Bakiye & Ã‡ekim
    document.getElementById('user-balance').innerText = user.balance.toFixed(2);
    if(user.balance >= 2.0) document.getElementById('withdraw-btn').classList.remove('hidden');

    // 2. Bilet & YarÄ±ÅŸma Butonu
    const btnArea = document.getElementById('ticket-area');
    if (status.active && user.has_ticket) {
        btnArea.innerHTML = `<button onclick="location.href='quiz.html'" class="btn-main" style="background:var(--green)">ğŸ YARIÅMAYA GÄ°R</button>`;
    } else if (user.has_ticket) {
        btnArea.innerHTML = `<div class="card" style="color:var(--green); text-align:center;">âœ… Biletiniz HazÄ±r (Saat: ${status.next})</div>`;
    } else {
        btnArea.innerHTML = `<button onclick="location.href='bilet.html'" class="btn-main" style="background:var(--yellow); color:black;">ğŸ« BÄ°LET AL</button>`;
    }

    // 3. Ã–dÃ¼l Havuzu GÃ¶sterimi
    const pool = parseFloat(sett.total_prize);
    document.getElementById('pool-display').innerHTML = `
        <div class="grid-2">
            <div>ğŸ¥‡ %50: <b>${(pool*0.5).toFixed(2)}</b></div>
            <div>ğŸ¥ˆ %35: <b>${(pool*0.35).toFixed(2)}</b></div>
            <div>ğŸ¥‰ %15: <b>${(pool*0.15).toFixed(2)}</b></div>
        </div>
    `;
}
