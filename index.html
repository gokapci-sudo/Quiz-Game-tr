<div class="container">
    <div class="counter-card">
        <small>AKTİF KATILIMCI (BİLETLİ)</small>
        <div id="big-counter" class="counter-value">...</div>
    </div>
    <div id="sponsor-area" class="sponsor-list">
        </div>
    <button onclick="login()" class="btn-main">GİRİŞ YAP</button>
</div>

<script>
async function login() {
    const user = window.Telegram.WebApp.initDataUnsafe?.user || { id: 12345, username: 'test_user' };
    await supabaseClient.from('profiles').upsert({ telegram_id: user.id, username: user.username });
    location.href = 'dashboard.html';
}

async function loadCounter() {
    const { count } = await supabaseClient.from('profiles').select('*', { count: 'exact', head: true }).eq('has_ticket', true);
    document.getElementById('big-counter').innerText = (1388 + (count || 0)).toLocaleString();
}
loadCounter();
</script>
