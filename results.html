<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="config.js"></script>
</head>
<body>
    <div class="dashboard-container">
        <header style="display: flex; align-items: center; margin-bottom: 20px;">
            <button onclick="location.href='dashboard.html'" class="btn-sub" style="width: auto; padding: 0 15px;">â¬…</button>
            <h2 style="margin-left: 15px;">ÅžAMPÄ°YONLAR</h2>
        </header>

        <div class="card" style="padding: 0; overflow: hidden;">
            <table>
                <thead>
                    <tr style="background: #242f3d;">
                        <th>#</th>
                        <th>YARIÅžMACI</th>
                        <th>PUAN</th>
                        <th>SÃœRE</th>
                    </tr>
                </thead>
                <tbody id="leaderboard-body"></tbody>
            </table>
        </div>
    </div>

    <script>
        async function load() {
            const { data } = await supabaseClient
                .from('profiles')
                .select('username, score, completion_time')
                .gt('score', 0)
                .order('score', { ascending: false })
                .order('completion_time', { ascending: true })
                .limit(50);

            const body = document.getElementById('leaderboard-body');
            body.innerHTML = data.map((u, i) => `
                <tr>
                    <td>${i === 0 ? 'ðŸ¥‡' : i === 1 ? 'ðŸ¥ˆ' : i === 2 ? 'ðŸ¥‰' : i+1}</td>
                    <td>${u.username}</td>
                    <td class="yellow-text">${u.score}</td>
                    <td>${u.completion_time}s</td>
                </tr>
            `).join('');
        }
        load();
    </script>
</body>
</html>
